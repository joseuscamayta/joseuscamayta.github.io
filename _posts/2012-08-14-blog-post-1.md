---
title: Scraping tasas SBS y función extraer variables por iniciales
excerpt: SBS scraping y Func. extraer variables por iniciales
date: 2021-10-14
tags:
  - cool posts
  - category1
  - category2
---
Este código extrae las tasas soberanos del gobierno del Perú que están alojadas en la SBS. Se presenta a continuación:

Lo primero que hacemos es importar las librerias correspondientes

<pre>

from selenium import webdriver
from selenium.webdriver.support.ui import Select
import time

website='https://www.sbs.gob.pe/app/pp/CurvaSoberana/Curvas_Consulta_Historica.asp'
path='C:/Users/JOSE/Downloads/chromedriver_win32/chromedriver'

driver = webdriver.Chrome(path)
driver.get(website)


}
</pre>

Finalmente implementamos el código:

<pre>

def extraer_tasas():
    driver = webdriver.Chrome(path)
    for i in range(0,44):
        driver = webdriver.Chrome(path)
        driver.get(website)

        dropdown= Select(driver.find_element_by_id('as_tip_curva'))
        dropdown.select_by_visible_text('Curva Soberana Soles')

        dropdown= Select(driver.find_element_by_id('as_fec_cons'))
        dropdown.select_by_visible_text(fechas_cc[i])

        boton_consultar=driver.find_element_by_xpath("//*[@id='Consultar']")
        boton_consultar.click()
        
        
        time.sleep(10)
        
        driver.close()
    

extraer_tasas()
}
</pre>



Función para extraer variables por iniciales de un Data Sets.
El siguiente código extrae la variables ingresos y gastos por iniciales.

<pre>


def extrae_pri(DataFrame,list):
    import pandas as pd
    nom_col=pd.DataFrame(DataFrame.columns)
    txt_extr=nom_col[nom_col[0].str.startswith(tuple(list))]
    txt_lsta=txt_extr[0].tolist()
    return txt_lsta

extrae_pri(sumaria_2014,['inghog','gashog'])
}
</pre>
